基础指令集
=================


------------------------
AT：测试AT启动
------------------------

**执行命令**

命令：
::

	AT

返回：
::

	OK

**说明**

- 测试AT指令是否有效


------------------------
AT+RST：重启模块
------------------------

**执行命令**

命令：
::

	AT+RST

返回：
::

	OK


------------------------
AT+GMR：显示固件版本
------------------------

**执行命令**

命令：
::

	AT+GMR

返回：
::

	<ATVER>
	<SDKVER>


----------------------------
AT+HELP：显示支持的所有命令
----------------------------

**执行命令**

命令：
::

	AT+HELP?

返回：
::

	CMDRSP:cmd:<命令>,help


----------------------------------------------------
AT+ USRRAM：显示用户可使用的RAM空间
----------------------------------------------------

**执行命令**

命令：
::

	AT+USRRAM?

返回：
::

	+USERRAM:value
	OK


----------------------------------------------------
AT+GSLP：进入 Deep-sleep 模式
----------------------------------------------------

**执行命令**

命令：
::

	AT+GSLP=<time>

返回：
::

	<time>
	OK

**参数**

- <time>：设备进入 Deep-sleep 的时长，单位：毫秒。设定时间到后，设备自动唤醒，调用深度睡眠唤醒桩，然后加载应用程序。


----------------------------------------------------
ATE：开启或关闭 AT 回显功能
----------------------------------------------------

**执行命令**

命令：
::

	ATE0

或

::

	ATE1

返回：
::

	OK

**说明**

+ ATE0：关闭回显，关闭打印日志
+ ATE1：开启回显，打开打印日志


--------------------------------------------------------------------
AT+UART_CUR：设置UART当前临时配置，不保存flash
--------------------------------------------------------------------

**执行命令**

命令：
::

	AT+UART_CUR=<baudrate>,<databits>,<stopbits>,<parity>,<flow control>

返回：
::

	OK

**参数**

- <baudrate>：UART 波特率

    + 支持范围为 9600 ~ 2000000

- <databits>：数据位

    + 5：5 bit 数据位
    + 6：6 bit 数据位
    + 7：7 bit 数据位
    + 8：8 bit 数

- <stopbits>：停止位

    + 1：1 bit 停止位
    + 2：2 bit 停止位

- <parity>：校验位

    + 0：None
    + 1：Odd
    + 2：Even

- <flow control>：流控

    + 0：不使能流控
    + 1：使能 RTS
    + 2：使能 CTS
    + 3：同时使能 RTS 和 CTS


--------------------------------------------------------------------
AT+UART_DEF：设置UART 默认配置，保存到flash
--------------------------------------------------------------------

**查询命令**

命令：
::

	AT+UART_DEF?

返回：
::

	+UART_DEF:<baudrate>,<databits>,<stopbits>,<parity>,<flow control>
	OK

**执行命令**

命令：
::

	AT+UART_DEF:<baudrate>,<databits>,<stopbits>,<parity>,<flow control>

返回：
::

	OK

**参数**

+ <baudrate>：UART 波特率

	+ 支持范围为 9600 ~ 2000000

+ <databits>：数据位

	+ 5：5 bit 数据位
	+ 6：6 bit 数据位
	+ 7：7 bit 数据位
	+ 8：8 bit 数

+ <stopbits>：停止位

	+ 1：1 bit 停止位
	+ 2：2 bit 停止位

+ <parity>：校验位

	+ 0：None
	+ 1：Odd
	+ 2：Even

+ <flow control>：流控

	+ 0：不使能流控
	+ 1：使能 RTS
	+ 2：使能 CTS
	+ 3：同时使能 RTS 和 CTS


--------------------------------------------------------------------
AT+SYSFLASH：查看设备flash分区表
--------------------------------------------------------------------

**查询命令**

命令：
::

	AT+SYSFLASH?

返回：
::

	<index>,< partition>,<dev>,< offset>,< length>
	OK

**参数**

- <index>：分区号
- <partition>：用户分区名称
- <dev>：物理设备编号
- <offset>：偏移地址
- <length>：数据长度


--------------------------------------------------------------------
AT+SYSTIMESTAMP：查询/设置本地时间戳
--------------------------------------------------------------------

**查询命令**

功能：

- 查询本地时间戳

命令：
::

	AT+SYSTIMESTAMP?

返回：
::

	+SYSTIMESTAMP:<Unix_timestamp>
	OK

**执行命令**

功能：

- 设置本地时间戳，当SNTP时间更新后，将同步更新时间戳。

命令：
::

	AT+SYSTIMESTAMP=<Unix_timestamp>

返回：
::

	OK

**参数**

- <Unix-timestamp>：Unix 时间戳，单位：秒

**示例**

::

	AT+SYSTIMESTAMP=1686305483    //2023-6-9 10:11:23


--------------------------------------------------------------------
AT+SLEEPPWCFG：设置 Light-sleep 唤醒源和唤醒 GPIO
--------------------------------------------------------------------

**执行命令**

命令：
::

	AT+SLEEPPWCFG= <wakeup source>,<param1>[,<param2>]

返回：
::

	OK

**参数**

+ <wakeup source>: 唤醒源

	+ 0：定时器唤醒
	+ 1：保留配置
	+ 2：GPIO 唤醒

+ <param1>:

	+当wakeup source指定定时器进行唤醒时，此参数指定睡眠时间，单位s
	+当wakeup source指定GPIO进行唤醒时, 此参数定义GPIO管脚号（0~28）

+ <param2>:当wakeup source指定GPIO进行唤醒时, 此参数定义GPIO 唤醒触发模式。

	+0:上升沿触发
	+1:下降沿触发

**示例**

RTC休眠
::

	AT+SLEEPPWCFG=0,2		//2秒自动唤醒

GPIO休眠
::

	AT+SLEEPPWCFG=2,20,0		//GPIO20上升沿唤醒


--------------------------------------------------------------------
AT+SYSSTORE：设置参数存储模式
--------------------------------------------------------------------

**查询命令**

命令：
::

	AT+SYSSTORE?

返回：
::

	+SYSSTORE:<store_mode>
	OK

**执行命令**

命令：
::

	AT+SYSSTORE=<store_mode>

返回：
::

	OK

**参数**

+ <store_mode>：参数存储模式

	- 0：命令配置不存入flash
	- 1：命令配置存入flash（默认）


--------------------------------------------------------------------
AT+RESTORE：恢复出厂设置
--------------------------------------------------------------------

**执行命令**

命令：
::

	AT+RESTORE

返回：
::

	OK

**说明**

- 该命令将擦除所有保存到 flash 的参数，并恢复为默认参数。
- 运行该命令会重启设备。


--------------------------------------------------------------------
AT+PRODUCTID：设置/查询产品ID
--------------------------------------------------------------------

**查询命令**

命令：
::

	AT+PRODUCTID?

返回：
::

	+PRODUCTID: <“productid”>
	OK

**执行命令**

命令：
::

	AT+PRODUCTID=<“productid”>

返回：
::

	OK

**参数**

- <productid>: 产品ID，最大长度64字节


--------------------------------------------------------------------
AT+DEVICENAME：设置/查询设备名称
--------------------------------------------------------------------

**查询命令**

命令：
::

	AT+DEVICENAME?

返回：
::

	+DEVICENAME: <“devicename”>
	OK

**执行命令**

命令：
::

	AT+DEVICENAME=<“devicename”>

返回：
::

	OK

**参数**

- <devicename>: 设备名称，最大长度64字节


--------------------------------------------------------------------
AT+ REGION：设置/查询设备所在国家
--------------------------------------------------------------------

**查询命令**

命令：
::

	AT+REGION?

返回：
::

	+REGION: <”country”>
	OK

**执行命令**

命令：
::

	AT+REGION=<”country”>

返回：
::

	OK

**参数**

- <REGION>: 设备所在国家，最大长度64字节


--------------------------------------------------------------------
AT+WORKMODE：设置/查询设备工作模式
--------------------------------------------------------------------

**查询命令**

命令：
::

	AT+WORKMODE?

返回：
::

	+WORKMODE: <mode>
	OK

**执行命令**

命令：
::

	AT+WORKMODE=<mode>

返回：
::

	OK

**参数**

- <mode>:
	+ 0: 工厂模式
	+ 1: 正常模式，只支持AT指令

**说明**

- 工厂模式，带非AT指令，支持内核打印，射频调参等功能，工常模式是设备正常工作模式，此模式只支持AT指令相关打印。
